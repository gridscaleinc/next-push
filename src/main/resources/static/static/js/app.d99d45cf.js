(function(){"use strict";var e={331:function(e,t,s){var a=s(751),l=s(615),r=s(641),o=s(33);const n={id:"app",class:"min-h-screen flex"},i={class:"card p-4"},c={class:"flex items-center gap-3"},d=["src"],u={class:"card p-2 mt-3"},p=["onClick"],m={class:"font-medium"},h={key:0,class:"ml-auto text-[11px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 border border-gray-200"},g={class:"card p-4 mt-3"},k={class:"mt-auto card p-3 text-sm"},b={class:"flex items-center justify-between"},f={class:"space-x-2"},v={class:"mt-2 block"},L={key:1,class:"flex-1 flex flex-col"},y={class:"px-4 pt-4 md:px-6"},w={class:"card px-3 py-2 md:px-4 md:py-3 flex items-center gap-3"},x=["aria-pressed","title"],C=["src"],F={class:"text-base md:text-lg font-semibold flex items-center gap-2"},S={class:"ml-auto flex items-center gap-3 text-xs md:text-sm text-gray-600"},U={key:0,class:"flex items-center gap-2"},A={class:"text-brand-700"},E={key:0,class:"md:hidden px-4"},P={class:"card mt-3 p-2 grid grid-cols-2 gap-2"},N=["onClick"],_={class:"max-w-7xl mx-auto w-full px-4 md:px-6 py-6 space-y-6"},X={key:0,class:"space-y-6"},T={key:0,class:"card p-4"},I={class:"font-semibold mb-3"},j={class:"grid md:grid-cols-2 gap-4"},V={class:"block"},W={class:"block"},J={class:"block md:col-span-2"},D={class:"md:col-span-2 flex items-center justify-end gap-2"},O={key:1,class:"space-y-6"},B={class:"card p-4"},M={class:"flex items-center justify-between"},R={class:"flex items-center gap-2"},$={class:"grid md:grid-cols-3 gap-4 mt-4"},Q={class:"flex items-center justify-between mb-2"},q={class:"font-semibold"},H={class:"text-sm text-gray-600 line-clamp-3"},G={class:"mt-3 flex flex-wrap gap-2"},K={class:"mt-4 flex items-center justify-between text-sm"},z=["href"],Y={class:"text-gray-500 ml-auto"},Z={class:"mt-3 flex gap-2"},ee=["onClick"],te=["onClick"],se={key:0,class:"text-center text-gray-500 py-10"},ae={key:0,class:"card p-4"},le={class:"font-semibold mb-3"},re={class:"grid md:grid-cols-2 gap-4"},oe={class:"block"},ne={class:"block"},ie={class:"block md:col-span-2"},ce={class:"block"},de={class:"block"},ue={class:"inline-flex items-center gap-2"},pe={class:"md:col-span-2 flex items-center justify-end gap-2"},me={key:2,class:"space-y-6"},he={class:"card p-4"},ge={class:"flex items-center justify-between"},ke={class:"flex items-center gap-2"},be={class:"mt-4 overflow-auto"},fe={class:"min-w-full text-sm"},ve={class:"p-2 whitespace-nowrap"},Le={class:"p-2"},ye={class:"text-xs text-gray-500"},we={class:"p-2"},xe={class:"p-2 max-w-[420px]"},Ce={class:"text-gray-700 whitespace-pre-wrap line-clamp-3"},Fe={class:"p-2 text-right space-x-2 whitespace-nowrap"},Se=["onClick"],Ue=["onClick"],Ae={key:0},Ee={key:0,class:"card p-4"},Pe={class:"flex items-start justify-between gap-6"},Ne={class:"flex-1"},_e={class:"font-semibold mb-1"},Xe={class:"text-sm text-gray-500 mb-4"},Te={class:"whitespace-pre-wrap text-gray-800"},Ie={key:0,class:"mt-6"},je={class:"space-y-2"},Ve={class:"text-xs text-gray-500 mb-1"},We={class:"whitespace-pre-wrap text-sm text-gray-800"},Je={class:"w-full max-w-md"},De={class:"mt-3 flex items-center justify-end gap-2"},Oe={key:3,class:"space-y-6"},Be={class:"card p-4"},Me={class:"flex items-center justify-between"},Re={class:"flex items-center gap-2"},$e={class:"mt-4 overflow-auto"},Qe={class:"min-w-full text-sm"},qe={class:"p-2 whitespace-nowrap"},He={class:"p-2 font-medium"},Ge={class:"p-2 text-gray-600"},Ke={class:"p-2 whitespace-nowrap"},ze={class:"p-2"},Ye={class:"p-2"},Ze={class:"text-xs text-gray-500"},et={class:"text-xs text-gray-500"},tt={class:"p-2 whitespace-nowrap"},st={class:"p-2 text-right space-x-2 whitespace-nowrap"},at=["onClick"],lt=["onClick"],rt={key:0},ot={key:0,class:"card p-4"},nt={class:"grid md:grid-cols-2 gap-4"},it={class:"block"},ct={class:"block"},dt={class:"block"},ut=["value"],pt={class:"block"},mt=["value"],ht={class:"block"},gt={class:"block"},kt={class:"block"},bt={class:"block"},ft={class:"block"},vt=["value"],Lt={class:"block"},yt=["value"],wt={class:"block"},xt=["value"],Ct={class:"block"},Ft={class:"md:col-span-2 flex items-center justify-end gap-2"},St={key:4,class:"space-y-6"},Ut={class:"card p-4"},At={class:"flex items-center justify-between"},Et={class:"flex items-center gap-2"},Pt={class:"mt-4 overflow-auto"},Nt={class:"min-w-full text-sm"},_t={class:"p-2 font-medium"},Xt={class:"p-2 text-gray-600"},Tt={class:"p-2"},It={class:"p-2"},jt={class:"p-2 text-gray-500 whitespace-nowrap"},Vt={class:"p-2 text-right space-x-2 whitespace-nowrap"},Wt=["onClick"],Jt={key:0},Dt={key:0,class:"card p-4"},Ot={class:"grid md:grid-cols-2 gap-4"},Bt={class:"block"},Mt={class:"block"},Rt={class:"block"},$t={class:"block"},Qt={class:"md:col-span-2 flex items-center justify-end gap-2"};function qt(e,t,s,l,qt,Ht){const Gt=(0,r.g2)("UserRegistrationComponent"),Kt=(0,r.g2)("NewsListComponent"),zt=(0,r.g2)("LoginComponent");return(0,r.uX)(),(0,r.CE)("div",n,[qt.isAuthenticated?((0,r.uX)(),(0,r.CE)("aside",{key:0,class:(0,o.C4)(["hidden md:flex md:flex-col transition-all duration-200 ease-in-out overflow-hidden",qt.ui.sidebarCollapsed?"w-0 px-0 py-0":"w-72 p-4"])},[(0,r.bo)((0,r.Lk)("div",i,[(0,r.Lk)("div",c,[(0,r.Lk)("img",{src:qt.branding.logoUrl,style:(0,o.Tr)({height:qt.branding.logoH+"px"}),class:"w-auto",alt:"Gridscale",onError:t[0]||(t[0]=(...e)=>Ht.onLogoError&&Ht.onLogoError(...e))},null,44,d),t[49]||(t[49]=(0,r.Lk)("div",{class:"min-w-0"},[(0,r.Lk)("div",{class:"font-semibold tracking-wide"},"Gridscale CMS"),(0,r.Lk)("div",{class:"text-xs text-gray-500"},"Bringing new value to the future")],-1))])],512),[[a.aG,!qt.ui.sidebarCollapsed]]),(0,r.bo)((0,r.Lk)("nav",u,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.nav,e=>((0,r.uX)(),(0,r.CE)("button",{key:e.key,onClick:t=>qt.route=e.key,class:(0,o.C4)(["w-full text-left px-3 py-2 rounded-xl flex items-center gap-3 hover:bg-brand-50",qt.route===e.key?"bg-brand-50 text-brand-700 ring-1 ring-brand-100":""])},[(0,r.Lk)("i",{class:(0,o.C4)([e.icon,"text-brand-500"])},null,2),(0,r.Lk)("span",m,(0,o.v_)(e.label),1),null!=e.badge?((0,r.uX)(),(0,r.CE)("span",h,(0,o.v_)(e.badge()),1)):(0,r.Q3)("",!0)],10,p))),128))],512),[[a.aG,!qt.ui.sidebarCollapsed]]),(0,r.bo)((0,r.Lk)("div",g,[t[50]||(t[50]=(0,r.Lk)("div",{class:"flex items-center justify-between"},[(0,r.Lk)("h3",{class:"font-semibold flex items-center gap-2"},[(0,r.Lk)("i",{class:"fa-solid fa-shield-halved text-brand-600"}),(0,r.eW)(" 管理者 ")])],-1)),qt.isAuthenticated&&"admin"===qt.currentUser?.userType?((0,r.uX)(),(0,r.Wv)(Gt,{key:0,users:qt.users,security:qt.security,"admin-unlocked":!0,onUserCreated:Ht.handleUserCreated,onAdminRelocked:e.handleAdminRelocked,onPasswordGenerated:Ht.handlePasswordGenerated},null,8,["users","security","onUserCreated","onAdminRelocked","onPasswordGenerated"])):(0,r.Q3)("",!0)],512),[[a.aG,!qt.ui.sidebarCollapsed]]),(0,r.bo)((0,r.Lk)("div",k,[(0,r.Lk)("div",b,[t[51]||(t[51]=(0,r.Lk)("span",{class:"text-gray-600"},"データ",-1)),(0,r.Lk)("div",f,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>Ht.exportJSON&&Ht.exportJSON(...e)),class:"px-2 py-1 rounded border"},"JSON"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>Ht.exportCSV&&Ht.exportCSV(...e)),class:"px-2 py-1 rounded border"},"CSV")])]),(0,r.Lk)("label",v,[(0,r.Lk)("input",{type:"file",class:"hidden",onChange:t[3]||(t[3]=e=>Ht.importFile(e)),accept:"application/json"},null,32),t[52]||(t[52]=(0,r.Lk)("span",{class:"inline-flex items-center gap-2 px-2 py-1 mt-1 rounded border cursor-pointer"},[(0,r.Lk)("i",{class:"fa-solid fa-file-import"}),(0,r.eW)(" インポート ")],-1))])],512),[[a.aG,!qt.ui.sidebarCollapsed]])],2)):(0,r.Q3)("",!0),qt.isAuthenticated?((0,r.uX)(),(0,r.CE)("section",L,[(0,r.Lk)("header",y,[(0,r.Lk)("div",w,[(0,r.Lk)("button",{class:"md:hidden px-2 py-1 rounded border",onClick:t[4]||(t[4]=e=>qt.drawer=!qt.drawer),title:"メニュー"},[...t[53]||(t[53]=[(0,r.Lk)("i",{class:"fa-solid fa-bars"},null,-1)])]),(0,r.Lk)("button",{class:"hidden md:inline-flex px-2 py-1 rounded border hover:bg-gray-50",onClick:t[5]||(t[5]=(...e)=>Ht.toggleSidebar&&Ht.toggleSidebar(...e)),"aria-pressed":qt.ui.sidebarCollapsed?"true":"false",title:qt.ui.sidebarCollapsed?"サイドバーを表示":"サイドバーを隠す"},[(0,r.Lk)("i",{class:(0,o.C4)(qt.ui.sidebarCollapsed?"fa-solid fa-angles-right":"fa-solid fa-angles-left")},null,2)],8,x),(0,r.Lk)("img",{src:qt.branding.logoUrl,style:(0,o.Tr)({height:Math.min(qt.branding.logoH,28)+"px"}),class:"hidden sm:block w-auto",alt:"Gridscale",onError:t[6]||(t[6]=(...e)=>Ht.onLogoError&&Ht.onLogoError(...e))},null,44,C),(0,r.Lk)("h1",F,[(0,r.Lk)("i",{class:(0,o.C4)([Ht.current.icon,"text-brand-600"])},null,2),(0,r.eW)(" "+(0,o.v_)(Ht.current.label),1)]),(0,r.Lk)("div",S,[qt.isAuthenticated?((0,r.uX)(),(0,r.CE)("div",U,[(0,r.Lk)("span",A,(0,o.v_)(qt.currentUser?.userName||qt.currentUser?.email),1),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>Ht.handleLogout&&Ht.handleLogout(...e)),class:"px-3 py-1 rounded border text-red-600 hover:bg-red-50"}," ログアウト ")])):((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[8]||(t[8]=e=>qt.showLoginModal=!0),class:"px-3 py-1 rounded border btn-primary"}," ログイン "))])])]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.drawer?((0,r.uX)(),(0,r.CE)("div",E,[(0,r.Lk)("div",P,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.nav,e=>((0,r.uX)(),(0,r.CE)("button",{key:e.key,onClick:t=>{qt.route=e.key,qt.drawer=!1},class:"px-3 py-2 rounded-xl border text-left flex items-center gap-2 hover:bg-brand-50"},[(0,r.Lk)("i",{class:(0,o.C4)([e.icon,"text-brand-600"])},null,2),(0,r.Lk)("span",null,(0,o.v_)(e.label),1)],8,N))),128))])])):(0,r.Q3)("",!0)]),_:1}),(0,r.Lk)("main",_,["news"===qt.route?((0,r.uX)(),(0,r.CE)("section",X,[(0,r.bF)(Kt,{ref:"newsListComponent",onCreateNews:t[9]||(t[9]=e=>Ht.openNewsForm()),onEditNews:Ht.openNewsForm,onDeleteNews:Ht.delNews},null,8,["onEditNews","onDeleteNews"]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.modals.news?((0,r.uX)(),(0,r.CE)("div",T,[(0,r.Lk)("h3",I,(0,o.v_)(qt.newsForm.id?"ニュースを編集":"ニュースを作成"),1),(0,r.Lk)("div",j,[(0,r.Lk)("label",V,[t[54]||(t[54]=(0,r.eW)("タイトル ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>qt.newsForm.title=e),class:"mt-1 w-full input"},null,512),[[a.Jo,qt.newsForm.title]])]),(0,r.Lk)("label",W,[t[55]||(t[55]=(0,r.eW)("日付 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>qt.newsForm.date=e),type:"date",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.newsForm.date]])]),(0,r.Lk)("label",J,[t[56]||(t[56]=(0,r.eW)("本文 ",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>qt.newsForm.body=e),rows:"6",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.newsForm.body]])]),(0,r.Lk)("div",D,[(0,r.Lk)("button",{onClick:t[13]||(t[13]=e=>qt.modals.news=!1),class:"px-3 py-2 rounded border"},"キャンセル"),(0,r.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>Ht.saveNews&&Ht.saveNews(...e)),class:"px-3 py-2 rounded-lg btn-primary"},"保存")])])])):(0,r.Q3)("",!0)]),_:1})])):(0,r.Q3)("",!0),"whitepapers"===qt.route?((0,r.uX)(),(0,r.CE)("section",O,[(0,r.Lk)("div",B,[(0,r.Lk)("div",M,[t[58]||(t[58]=(0,r.Lk)("h2",{class:"font-semibold"},"ホワイトペーパー",-1)),(0,r.Lk)("div",R,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>qt.filters.wp.q=e),placeholder:"検索：タイトル/タグ",class:"input w-56"},null,512),[[a.Jo,qt.filters.wp.q]]),(0,r.Lk)("button",{onClick:t[16]||(t[16]=e=>Ht.openWPForm()),class:"px-3 py-2 rounded-lg btn-primary"},[...t[57]||(t[57]=[(0,r.Lk)("i",{class:"fa-solid fa-plus mr-1"},null,-1),(0,r.eW)(" 新規登録 ",-1)])])])]),(0,r.Lk)("div",$,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.filteredWP,e=>((0,r.uX)(),(0,r.CE)("article",{key:e.id,class:"card p-4"},[(0,r.Lk)("div",Q,[(0,r.Lk)("h3",q,(0,o.v_)(e.title),1),(0,r.Lk)("span",{class:(0,o.C4)(["text-xs px-2 py-0.5 rounded-full",e.published?"bg-brand-100 text-brand-800":"bg-gray-100 text-gray-700"])},(0,o.v_)(e.published?"公開":"下書き"),3)]),(0,r.Lk)("p",H,(0,o.v_)(e.desc),1),(0,r.Lk)("div",G,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.tags||[],e=>((0,r.uX)(),(0,r.CE)("span",{key:e,class:"tag"},(0,o.v_)(e),1))),128))]),(0,r.Lk)("div",K,[e.url?((0,r.uX)(),(0,r.CE)("a",{key:0,href:e.url,target:"_blank",class:"text-brand-700 hover:underline"},[...t[59]||(t[59]=[(0,r.Lk)("i",{class:"fa-solid fa-file-arrow-down mr-1"},null,-1),(0,r.eW)(" プレビュー/ダウンロード ",-1)])],8,z)):(0,r.Q3)("",!0),(0,r.Lk)("span",Y,(0,o.v_)(e.date),1)]),(0,r.Lk)("div",Z,[(0,r.Lk)("button",{onClick:t=>Ht.openWPForm(e),class:"px-2 py-1 rounded border hover:bg-gray-50"},[...t[60]||(t[60]=[(0,r.Lk)("i",{class:"fa-solid fa-pen"},null,-1)])],8,ee),(0,r.Lk)("button",{onClick:t=>Ht.delWP(e.id),class:"px-2 py-1 rounded border text-red-600 hover:bg-red-50"},[...t[61]||(t[61]=[(0,r.Lk)("i",{class:"fa-solid fa-trash"},null,-1)])],8,te)])]))),128))]),0===Ht.filteredWP.length?((0,r.uX)(),(0,r.CE)("p",se,"登録がありません")):(0,r.Q3)("",!0)]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.modals.wp?((0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("h3",le,(0,o.v_)(qt.wpForm.id?"ホワイトペーパーを編集":"ホワイトペーパーを登録"),1),(0,r.Lk)("div",re,[(0,r.Lk)("label",oe,[t[62]||(t[62]=(0,r.eW)("タイトル ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>qt.wpForm.title=e),class:"mt-1 w-full input"},null,512),[[a.Jo,qt.wpForm.title]])]),(0,r.Lk)("label",ne,[t[63]||(t[63]=(0,r.eW)("公開日 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>qt.wpForm.date=e),type:"date",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.wpForm.date]])]),(0,r.Lk)("label",ie,[t[64]||(t[64]=(0,r.eW)("説明 ",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[19]||(t[19]=e=>qt.wpForm.desc=e),rows:"4",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.wpForm.desc]])]),(0,r.Lk)("label",ce,[t[65]||(t[65]=(0,r.eW)("公開URL（PDF等） ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>qt.wpForm.url=e),placeholder:"https://example.com/whitepaper.pdf",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.wpForm.url]])]),(0,r.Lk)("label",de,[t[66]||(t[66]=(0,r.eW)("タグ（, 区切り） ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>qt.wpTags=e),placeholder:"DX, AI, 金融",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.wpTags]])]),(0,r.Lk)("label",ue,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=e=>qt.wpForm.published=e)},null,512),[[a.lH,qt.wpForm.published]]),t[67]||(t[67]=(0,r.Lk)("span",null,"公開する",-1))]),(0,r.Lk)("div",pe,[(0,r.Lk)("button",{onClick:t[23]||(t[23]=e=>qt.modals.wp=!1),class:"px-3 py-2 rounded border"},"キャンセル"),(0,r.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>Ht.saveWP&&Ht.saveWP(...e)),class:"px-3 py-2 rounded-lg btn-primary"},"保存")])])])):(0,r.Q3)("",!0)]),_:1})])):(0,r.Q3)("",!0),"contact"===qt.route?((0,r.uX)(),(0,r.CE)("section",me,[(0,r.Lk)("div",he,[(0,r.Lk)("div",ge,[t[69]||(t[69]=(0,r.Lk)("h2",{class:"font-semibold"},"お問い合わせ",-1)),(0,r.Lk)("div",ke,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[25]||(t[25]=e=>qt.filters.contact.status=e),class:"input"},[...t[68]||(t[68]=[(0,r.Lk)("option",{value:""},"すべて",-1),(0,r.Lk)("option",{value:"open"},"未対応",-1),(0,r.Lk)("option",{value:"replied"},"返信済み",-1)])],512),[[a.u1,qt.filters.contact.status]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>qt.filters.contact.q=e),placeholder:"検索：名前/件名/本文",class:"input w-56"},null,512),[[a.Jo,qt.filters.contact.q]])])]),(0,r.Lk)("div",be,[(0,r.Lk)("table",fe,[t[73]||(t[73]=(0,r.Lk)("thead",{class:"border-b bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left p-2"},"日時"),(0,r.Lk)("th",{class:"text-left p-2"},"氏名"),(0,r.Lk)("th",{class:"text-left p-2"},"件名"),(0,r.Lk)("th",{class:"text-left p-2"},"内容"),(0,r.Lk)("th",{class:"text-right p-2"},"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.filteredContacts,e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,class:"border-b align-top"},[(0,r.Lk)("td",ve,(0,o.v_)(e.createdAt),1),(0,r.Lk)("td",Le,[(0,r.eW)((0,o.v_)(e.name),1),(0,r.Lk)("div",ye,(0,o.v_)(e.email),1)]),(0,r.Lk)("td",we,(0,o.v_)(e.subject||"-"),1),(0,r.Lk)("td",xe,[(0,r.Lk)("div",Ce,(0,o.v_)(e.message),1)]),(0,r.Lk)("td",Fe,[(0,r.Lk)("button",{onClick:t=>Ht.openContact(e),class:"px-2 py-1 rounded border hover:bg-gray-50"},[...t[70]||(t[70]=[(0,r.Lk)("i",{class:"fa-solid fa-eye"},null,-1)])],8,Se),(0,r.Lk)("button",{onClick:t=>Ht.delContact(e.id),class:"px-2 py-1 rounded border text-red-600 hover:bg-red-50"},[...t[71]||(t[71]=[(0,r.Lk)("i",{class:"fa-solid fa-trash"},null,-1)])],8,Ue)])]))),128)),0===Ht.filteredContacts.length?((0,r.uX)(),(0,r.CE)("tr",Ae,[...t[72]||(t[72]=[(0,r.Lk)("td",{colspan:"5",class:"p-6 text-center text-gray-500"},"該当なし",-1)])])):(0,r.Q3)("",!0)])])])]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.modals.contact?((0,r.uX)(),(0,r.CE)("div",Ee,[(0,r.Lk)("div",Pe,[(0,r.Lk)("div",Ne,[(0,r.Lk)("h3",_e,(0,o.v_)(qt.contactForm.subject||"（件名なし）"),1),(0,r.Lk)("div",Xe,(0,o.v_)(qt.contactForm.name)+" ・ "+(0,o.v_)(qt.contactForm.email)+" ・ "+(0,o.v_)(qt.contactForm.createdAt),1),(0,r.Lk)("p",Te,(0,o.v_)(qt.contactForm.message),1),(qt.contactForm.replies||[]).length?((0,r.uX)(),(0,r.CE)("div",Ie,[t[74]||(t[74]=(0,r.Lk)("h4",{class:"font-semibold text-sm mb-2"},"返信履歴",-1)),(0,r.Lk)("div",je,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(qt.contactForm.replies,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.at,class:"p-3 rounded-lg bg-gray-50 border"},[(0,r.Lk)("div",Ve,(0,o.v_)(e.at),1),(0,r.Lk)("div",We,(0,o.v_)(e.body),1)]))),128))])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Je,[(0,r.Lk)("div",De,[(0,r.Lk)("button",{onClick:t[27]||(t[27]=e=>qt.modals.contact=!1),class:"px-3 py-2 rounded border"},"閉じる"),(0,r.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>Ht.replyEmail&&Ht.replyEmail(...e)),class:"px-3 py-2 rounded-lg btn-primary"},[...t[75]||(t[75]=[(0,r.Lk)("i",{class:"fa-solid fa-envelope mr-1"},null,-1),(0,r.eW)(" メールを返信 ",-1)])])])])])])):(0,r.Q3)("",!0)]),_:1})])):(0,r.Q3)("",!0),"recruit"===qt.route?((0,r.uX)(),(0,r.CE)("section",Oe,[(0,r.Lk)("div",Be,[(0,r.Lk)("div",Me,[t[77]||(t[77]=(0,r.Lk)("h2",{class:"font-semibold"},"採用エントリー",-1)),(0,r.Lk)("div",Re,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[29]||(t[29]=e=>qt.filters.rec.gender=e),class:"input"},[...t[76]||(t[76]=[(0,r.Lk)("option",{value:""},"全て",-1),(0,r.Lk)("option",{value:"male"},"男性",-1),(0,r.Lk)("option",{value:"female"},"女性",-1),(0,r.Lk)("option",{value:"other"},"その他",-1)])],512),[[a.u1,qt.filters.rec.gender]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[30]||(t[30]=e=>qt.filters.rec.q=e),placeholder:"検索：氏名/フリガナ/メール",class:"input w-56"},null,512),[[a.Jo,qt.filters.rec.q]])])]),(0,r.Lk)("div",$e,[(0,r.Lk)("table",Qe,[t[81]||(t[81]=(0,r.Lk)("thead",{class:"border-b bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left p-2"},"応募日"),(0,r.Lk)("th",{class:"text-left p-2"},"氏名"),(0,r.Lk)("th",{class:"text-left p-2"},"フリガナ"),(0,r.Lk)("th",{class:"text-left p-2"},"生年月日"),(0,r.Lk)("th",{class:"text-left p-2"},"性別"),(0,r.Lk)("th",{class:"text-left p-2"},"連絡先"),(0,r.Lk)("th",{class:"text-left p-2"},"卒業予定"),(0,r.Lk)("th",{class:"text-right p-2"},"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.filteredRec,e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id,class:"border-b"},[(0,r.Lk)("td",qe,(0,o.v_)(Ht.formatDate(e.createdAt)),1),(0,r.Lk)("td",He,(0,o.v_)(e.name),1),(0,r.Lk)("td",Ge,(0,o.v_)(e.nameKana),1),(0,r.Lk)("td",Ke,(0,o.v_)(Ht.formatBirthDate(e)),1),(0,r.Lk)("td",ze,(0,o.v_)(Ht.formatGender(e.gender)),1),(0,r.Lk)("td",Ye,[(0,r.Lk)("div",Ze,(0,o.v_)(e.email),1),(0,r.Lk)("div",et,(0,o.v_)(e.tel||"-"),1)]),(0,r.Lk)("td",tt,(0,o.v_)(Ht.formatGraduation(e)),1),(0,r.Lk)("td",st,[(0,r.Lk)("button",{onClick:t=>Ht.openRecForm(e),class:"px-2 py-1 rounded border hover:bg-gray-50"},[...t[78]||(t[78]=[(0,r.Lk)("i",{class:"fa-solid fa-eye"},null,-1)])],8,at),(0,r.Lk)("button",{onClick:t=>Ht.delRec(e.id),class:"px-2 py-1 rounded border text-red-600 hover:bg-red-50"},[...t[79]||(t[79]=[(0,r.Lk)("i",{class:"fa-solid fa-trash"},null,-1)])],8,lt)])]))),128)),0===Ht.filteredRec.length?((0,r.uX)(),(0,r.CE)("tr",rt,[...t[80]||(t[80]=[(0,r.Lk)("td",{colspan:"8",class:"p-6 text-center text-gray-500"},"該当なし",-1)])])):(0,r.Q3)("",!0)])])])]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.modals.rec?((0,r.uX)(),(0,r.CE)("div",ot,[t[94]||(t[94]=(0,r.Lk)("h3",{class:"font-semibold mb-3"},"応募者詳細",-1)),(0,r.Lk)("div",nt,[(0,r.Lk)("label",it,[t[82]||(t[82]=(0,r.eW)("氏名 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>qt.recForm.name=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.name]])]),(0,r.Lk)("label",ct,[t[83]||(t[83]=(0,r.eW)("フリガナ ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>qt.recForm.nameKana=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.nameKana]])]),(0,r.Lk)("label",dt,[t[84]||(t[84]=(0,r.eW)("生年月日 ",-1)),(0,r.Lk)("input",{value:Ht.formatBirthDateFull(qt.recForm),class:"mt-1 w-full input",readonly:""},null,8,ut)]),(0,r.Lk)("label",pt,[t[85]||(t[85]=(0,r.eW)("性別 ",-1)),(0,r.Lk)("input",{value:Ht.formatGender(qt.recForm.gender),class:"mt-1 w-full input",readonly:""},null,8,mt)]),(0,r.Lk)("label",ht,[t[86]||(t[86]=(0,r.eW)("メールアドレス ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>qt.recForm.email=e),type:"email",class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.email]])]),(0,r.Lk)("label",gt,[t[87]||(t[87]=(0,r.eW)("電話番号 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[34]||(t[34]=e=>qt.recForm.tel=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.tel]])]),(0,r.Lk)("label",kt,[t[88]||(t[88]=(0,r.eW)("郵便番号 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>qt.recForm.postcode=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.postcode]])]),(0,r.Lk)("label",bt,[t[89]||(t[89]=(0,r.eW)("住所 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[36]||(t[36]=e=>qt.recForm.address=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.address]])]),(0,r.Lk)("label",ft,[t[90]||(t[90]=(0,r.eW)("卒業予定 ",-1)),(0,r.Lk)("input",{value:Ht.formatGraduation(qt.recForm),class:"mt-1 w-full input",readonly:""},null,8,vt)]),(0,r.Lk)("label",Lt,[t[91]||(t[91]=(0,r.eW)("履歴書ファイル ",-1)),(0,r.Lk)("input",{value:qt.recForm.resumeFilename||"-",class:"mt-1 w-full input",readonly:""},null,8,yt)]),(0,r.Lk)("label",wt,[t[92]||(t[92]=(0,r.eW)("応募日時 ",-1)),(0,r.Lk)("input",{value:Ht.formatDate(qt.recForm.createdAt),class:"mt-1 w-full input",readonly:""},null,8,xt)]),(0,r.Lk)("label",Ct,[t[93]||(t[93]=(0,r.eW)("IPアドレス ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>qt.recForm.ipAddress=e),class:"mt-1 w-full input",readonly:""},null,512),[[a.Jo,qt.recForm.ipAddress]])]),(0,r.Lk)("div",Ft,[(0,r.Lk)("button",{onClick:t[38]||(t[38]=e=>qt.modals.rec=!1),class:"px-3 py-2 rounded border"},"閉じる")])])])):(0,r.Q3)("",!0)]),_:1})])):(0,r.Q3)("",!0),"users"===qt.route?((0,r.uX)(),(0,r.CE)("section",St,[(0,r.Lk)("div",Ut,[(0,r.Lk)("div",At,[t[97]||(t[97]=(0,r.Lk)("h2",{class:"font-semibold"},"ユーザー管理",-1)),(0,r.Lk)("div",Et,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[39]||(t[39]=e=>qt.filters.users.role=e),class:"input"},[...t[95]||(t[95]=[(0,r.Lk)("option",{value:""},"全ての権限",-1),(0,r.Lk)("option",{value:"admin"},"管理者",-1),(0,r.Lk)("option",{value:"editor"},"編集者",-1),(0,r.Lk)("option",{value:"viewer"},"閲覧のみ",-1)])],512),[[a.u1,qt.filters.users.role]]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[40]||(t[40]=e=>qt.filters.users.status=e),class:"input"},[...t[96]||(t[96]=[(0,r.Lk)("option",{value:""},"全ての状態",-1),(0,r.Lk)("option",{value:"active"},"有効",-1),(0,r.Lk)("option",{value:"inactive"},"無効",-1)])],512),[[a.u1,qt.filters.users.status]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[41]||(t[41]=e=>qt.filters.users.q=e),placeholder:"検索：名前/メール",class:"input w-56"},null,512),[[a.Jo,qt.filters.users.q]])])]),(0,r.Lk)("div",Pt,[(0,r.Lk)("table",Nt,[t[100]||(t[100]=(0,r.Lk)("thead",{class:"border-b bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left p-2"},"名前"),(0,r.Lk)("th",{class:"text-left p-2"},"メール"),(0,r.Lk)("th",{class:"text-left p-2"},"権限"),(0,r.Lk)("th",{class:"text-left p-2"},"状態"),(0,r.Lk)("th",{class:"text-left p-2"},"作成日"),(0,r.Lk)("th",{class:"text-right p-2"},"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ht.filteredUsers,e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id||e.userId,class:"border-b"},[(0,r.Lk)("td",_t,(0,o.v_)(e.name||e.userName),1),(0,r.Lk)("td",Xt,(0,o.v_)(e.email),1),(0,r.Lk)("td",Tt,[(0,r.Lk)("span",{class:(0,o.C4)(["px-2 py-1 rounded-full text-xs","admin"===(e.role||e.userType)?"bg-red-100 text-red-700":"editor"===(e.role||e.userType)?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},(0,o.v_)(Ht.roleLabel(e.role||e.userType)),3)]),(0,r.Lk)("td",It,[(0,r.Lk)("span",{class:(0,o.C4)(["px-2 py-1 rounded-full text-xs",(void 0!==e.active?e.active:e.activeFlag)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"])},(0,o.v_)((void 0!==e.active?e.active:e.activeFlag)?"有効":"無効"),3)]),(0,r.Lk)("td",jt,(0,o.v_)((e.createdAt||"").replace("T"," ").slice(0,16)),1),(0,r.Lk)("td",Vt,[(0,r.Lk)("button",{onClick:t=>Ht.openUserForm(e),class:"px-2 py-1 rounded border hover:bg-gray-50"},[...t[98]||(t[98]=[(0,r.Lk)("i",{class:"fa-solid fa-pen"},null,-1)])],8,Wt)])]))),128)),0===Ht.filteredUsers.length?((0,r.uX)(),(0,r.CE)("tr",Jt,[...t[99]||(t[99]=[(0,r.Lk)("td",{colspan:"6",class:"p-6 text-center text-gray-500"},"該当なし",-1)])])):(0,r.Q3)("",!0)])])])]),(0,r.bF)(a.eB,{name:"fade"},{default:(0,r.k6)(()=>[qt.modals.user?((0,r.uX)(),(0,r.CE)("div",Dt,[t[107]||(t[107]=(0,r.Lk)("h3",{class:"font-semibold mb-3"},"ユーザー情報を編集",-1)),(0,r.Lk)("div",Ot,[(0,r.Lk)("label",Bt,[t[101]||(t[101]=(0,r.eW)("名前 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[42]||(t[42]=e=>qt.userForm.userName=e),class:"mt-1 w-full input"},null,512),[[a.Jo,qt.userForm.userName]])]),(0,r.Lk)("label",Mt,[t[102]||(t[102]=(0,r.eW)("メール ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[43]||(t[43]=e=>qt.userForm.email=e),type:"email",class:"mt-1 w-full input"},null,512),[[a.Jo,qt.userForm.email]])]),(0,r.Lk)("label",Rt,[t[104]||(t[104]=(0,r.eW)("権限 ",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[44]||(t[44]=e=>qt.userForm.userType=e),class:"mt-1 w-full input"},[...t[103]||(t[103]=[(0,r.Lk)("option",{value:"admin"},"管理者",-1),(0,r.Lk)("option",{value:"editor"},"編集者",-1),(0,r.Lk)("option",{value:"viewer"},"閲覧のみ",-1)])],512),[[a.u1,qt.userForm.userType]])]),(0,r.Lk)("label",$t,[t[106]||(t[106]=(0,r.eW)("状態 ",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[45]||(t[45]=e=>qt.userForm.activeFlag=e),class:"mt-1 w-full input"},[...t[105]||(t[105]=[(0,r.Lk)("option",{value:!0},"有効",-1),(0,r.Lk)("option",{value:!1},"無効",-1)])],512),[[a.u1,qt.userForm.activeFlag]])]),(0,r.Lk)("div",Qt,[(0,r.Lk)("button",{onClick:t[46]||(t[46]=e=>qt.modals.user=!1),class:"px-3 py-2 rounded border"},"キャンセル"),(0,r.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>Ht.saveUser&&Ht.saveUser(...e)),class:"px-3 py-2 rounded-lg btn-primary"},"保存")])])])):(0,r.Q3)("",!0)]),_:1})])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),(0,r.bF)(zt,{"show-login":qt.showLoginModal,"force-login":!qt.isAuthenticated,onClose:t[48]||(t[48]=e=>qt.showLoginModal=!1),onLoginSuccess:Ht.handleLoginSuccess},null,8,["show-login","force-login","onLoginSuccess"])])}var Ht=s(335);const Gt={class:"card p-4"},Kt={class:"flex items-center justify-between"},zt={class:"flex items-center gap-2"},Yt={class:"mt-4 overflow-auto"},Zt={class:"min-w-full text-sm"},es={class:"p-2 whitespace-nowrap"},ts={class:"p-2 font-medium"},ss={class:"p-2 text-gray-600 truncate max-w-[420px]"},as={class:"p-2 text-right space-x-2 whitespace-nowrap"},ls=["onClick"],rs=["onClick"],os={key:0},ns={key:1},is={key:0,class:"mt-4 flex items-center justify-center gap-2"},cs=["disabled"],ds={class:"px-3 py-1"},us=["disabled"];function ps(e,t,s,l,n,i){return(0,r.uX)(),(0,r.CE)("div",Gt,[(0,r.Lk)("div",Kt,[t[5]||(t[5]=(0,r.Lk)("h2",{class:"font-semibold"},"ニュース一覧",-1)),(0,r.Lk)("div",zt,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),placeholder:"検索：タイトル/本文",class:"input w-56"},null,512),[[a.Jo,n.searchQuery]]),(0,r.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("create-news")),class:"px-3 py-2 rounded-lg btn-primary"},[...t[4]||(t[4]=[(0,r.Lk)("i",{class:"fa-solid fa-plus mr-1"},null,-1),(0,r.eW)(" 新規作成 ",-1)])])])]),(0,r.Lk)("div",Yt,[(0,r.Lk)("table",Zt,[t[10]||(t[10]=(0,r.Lk)("thead",{class:"border-b bg-gray-50"},[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left p-2"},"日付"),(0,r.Lk)("th",{class:"text-left p-2"},"タイトル"),(0,r.Lk)("th",{class:"text-left p-2"},"本文"),(0,r.Lk)("th",{class:"text-right p-2"},"操作")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.filteredNews,s=>((0,r.uX)(),(0,r.CE)("tr",{key:s.id,class:"border-b"},[(0,r.Lk)("td",es,(0,o.v_)(s.date),1),(0,r.Lk)("td",ts,(0,o.v_)(s.title),1),(0,r.Lk)("td",ss,(0,o.v_)(s.content),1),(0,r.Lk)("td",as,[(0,r.Lk)("button",{onClick:t=>e.$emit("edit-news",s),class:"px-2 py-1 rounded border hover:bg-gray-50"},[...t[6]||(t[6]=[(0,r.Lk)("i",{class:"fa-solid fa-pen"},null,-1)])],8,ls),(0,r.Lk)("button",{onClick:t=>e.$emit("delete-news",s.id),class:"px-2 py-1 rounded border text-red-600 hover:bg-red-50"},[...t[7]||(t[7]=[(0,r.Lk)("i",{class:"fa-solid fa-trash"},null,-1)])],8,rs)])]))),128)),n.loading?((0,r.uX)(),(0,r.CE)("tr",os,[...t[8]||(t[8]=[(0,r.Lk)("td",{colspan:"4",class:"p-6 text-center text-gray-500"},"読み込み中...",-1)])])):(0,r.Q3)("",!0),n.loading||0!==i.filteredNews.length?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("tr",ns,[...t[9]||(t[9]=[(0,r.Lk)("td",{colspan:"4",class:"p-6 text-center text-gray-500"},"該当なし",-1)])]))])]),!n.loading&&n.totalPages>1?((0,r.uX)(),(0,r.CE)("div",is,[(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.previousPage&&i.previousPage(...e)),disabled:0===n.currentPage,class:"px-3 py-1 rounded border hover:bg-gray-50 disabled:opacity-50"}," 前へ ",8,cs),(0,r.Lk)("span",ds,(0,o.v_)(n.currentPage+1)+" / "+(0,o.v_)(n.totalPages),1),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:n.currentPage>=n.totalPages-1,class:"px-3 py-1 rounded border hover:bg-gray-50 disabled:opacity-50"}," 次へ ",8,us)])):(0,r.Q3)("",!0)])])}var ms={name:"NewsListComponent",emits:["create-news","edit-news","delete-news"],data(){return{searchQuery:"",loading:!1,newsData:[],currentPage:0,totalPages:0,totalElements:0}},computed:{filteredNews(){const e=this.searchQuery.trim().toLowerCase();return this.newsData.filter(t=>!e||(t.title+(t.content||"")).toLowerCase().includes(e))}},watch:{},async mounted(){await this.fetchNews()},methods:{async fetchNews(){this.loading=!0;try{const e=await Ht.A.get(`/api/news?page=${this.currentPage}&size=5`);this.newsData=e.data.content||[],this.totalPages=e.data.totalPages||0,this.totalElements=e.data.totalElements||0}catch(e){console.error("Failed to fetch news:",e),this.newsData=[]}finally{this.loading=!1}},async refreshNews(){this.currentPage=0,await this.fetchNews()},async nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,await this.fetchNews())},async previousPage(){this.currentPage>0&&(this.currentPage--,await this.fetchNews())}}},hs=s(262);const gs=(0,hs.A)(ms,[["render",ps]]);var ks=gs;const bs={class:"mt-2"},fs={class:"block text-sm"},vs={class:"block text-sm mt-2"},Ls={class:"flex gap-2 mt-2"},ys={class:"block text-sm flex-1"},ws={class:"block text-sm w-24"},xs={class:"block text-sm mt-2"},Cs={class:"flex gap-2 mt-1"},Fs={class:"block text-sm mt-2"},Ss={class:"mt-3 text-xs text-gray-600"},Us={class:"mt-2"},As={class:"space-y-1 max-h-28 overflow-auto"},Es={class:"truncate"},Ps={class:"text-gray-500"},Ns={class:"text-xs text-gray-400 whitespace-nowrap"};function _s(e,t,s,l,n,i){return(0,r.uX)(),(0,r.CE)("div",bs,[t[19]||(t[19]=(0,r.Lk)("h4",{class:"text-sm font-medium mb-2"},"ユーザー登録（管理者のみ）",-1)),(0,r.Lk)("label",fs,[t[9]||(t[9]=(0,r.eW)("氏名 ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.userForm.name=e),class:"mt-1 w-full input",placeholder:"山田 太郎"},null,512),[[a.Jo,n.userForm.name]])]),(0,r.Lk)("label",vs,[t[10]||(t[10]=(0,r.eW)("メール ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.userForm.email=e),type:"email",class:"mt-1 w-full input",placeholder:"taro@example.com"},null,512),[[a.Jo,n.userForm.email]])]),(0,r.Lk)("div",Ls,[(0,r.Lk)("label",ys,[t[12]||(t[12]=(0,r.eW)("権限 ",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.userForm.role=e),class:"mt-1 w-full input"},[...t[11]||(t[11]=[(0,r.Lk)("option",{value:"admin"},"管理者",-1),(0,r.Lk)("option",{value:"editor"},"編集者",-1),(0,r.Lk)("option",{value:"viewer"},"閲覧のみ",-1)])],512),[[a.u1,n.userForm.role]])]),(0,r.Lk)("label",ws,[t[14]||(t[14]=(0,r.eW)("状態 ",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.userForm.active=e),class:"mt-1 w-full input"},[...t[13]||(t[13]=[(0,r.Lk)("option",{value:!0},"有効",-1),(0,r.Lk)("option",{value:!1},"無効",-1)])],512),[[a.u1,n.userForm.active]])])]),(0,r.Lk)("label",xs,[t[15]||(t[15]=(0,r.eW)("初期パスワード ",-1)),(0,r.Lk)("div",Cs,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.userForm.tempPass=e),type:"text",class:"flex-1 input",placeholder:"英数8文字以上"},null,512),[[a.Jo,n.userForm.tempPass]]),(0,r.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.generateTempPass&&i.generateTempPass(...e)),class:"px-2 rounded border"},"生成")])]),(0,r.Lk)("label",Fs,[t[16]||(t[16]=(0,r.eW)("メモ ",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.userForm.note=e),rows:"2",class:"mt-1 w-full input",placeholder:"部署や備考など"},null,512),[[a.Jo,n.userForm.note]])]),(0,r.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.createUser&&i.createUser(...e)),class:"mt-3 w-full px-3 py-2 rounded-lg btn-primary"},[...t[17]||(t[17]=[(0,r.Lk)("i",{class:"fa-solid fa-user-plus mr-1"},null,-1),(0,r.eW)(" 登録 ",-1)])]),(0,r.Lk)("div",Ss," 登録数: "+(0,o.v_)(s.users.length),1),(0,r.Lk)("div",Us,[t[18]||(t[18]=(0,r.Lk)("div",{class:"text-xs text-gray-500 mb-1"},"最近登録",-1)),(0,r.Lk)("ul",As,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.recentUsers,e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,class:"text-sm flex justify-between gap-2"},[(0,r.Lk)("span",Es,[(0,r.eW)((0,o.v_)(e.name)+" ",1),(0,r.Lk)("span",Ps,"・"+(0,o.v_)(i.roleLabel(e.role)),1)]),(0,r.Lk)("span",Ns,(0,o.v_)((e.createdAt||"").replace("T"," ").slice(5,16)),1)]))),128))])]),(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.relockAdmin&&i.relockAdmin(...e)),class:"mt-3 w-full px-3 py-2 rounded border"}," ロック ")])}var Xs={name:"UserRegistrationComponent",props:{users:{type:Array,required:!0},security:{type:Object,required:!0},adminUnlocked:{type:Boolean,required:!0}},emits:["user-created","admin-relocked","password-generated"],data(){return{userForm:{name:"",email:"",role:"editor",active:!0,tempPass:"",note:""}}},computed:{recentUsers(){return[...this.users].sort((e,t)=>(t.createdAt||"").localeCompare(e.createdAt||"")).slice(0,5)}},methods:{roleLabel(e){return"admin"===e?"管理者":"editor"===e?"編集者":"閲覧のみ"},generateTempPass(){const e="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz23456789!@#$%^&*";let t="";for(let s=0;s<12;s++)t+=e[Math.floor(Math.random()*e.length)];this.userForm.tempPass=t,this.$emit("password-generated",t)},async createUser(){if(this.security.adminEnabled&&!this.adminUnlocked)return void alert("管理者ロックを解除してください");const e=this.userForm;if(!e.name.trim())return alert("氏名は必須です");if(!e.email.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email))return alert("メールの形式が不正です");if(!e.tempPass||e.tempPass.length<8)return alert("初期パスワードは8文字以上にしてください");try{const t={userName:e.name.trim(),email:e.email.trim(),userType:e.role,activeFlag:!!e.active,password:e.tempPass},s=await Ht.A.post("/api/users",t),a={id:s.data.userId,name:s.data.userName,email:s.data.email,role:s.data.userType,active:s.data.activeFlag,note:e.note||"",createdAt:(new Date).toISOString(),auth:{salt:"",hash:""}};this.$emit("user-created",a),this.userForm={name:"",email:"",role:"editor",active:!0,tempPass:"",note:""},alert("ユーザーを登録しました（初期パスワードは本人へ安全に共有してください）")}catch(t){console.error("Failed to create user:",t),t.response&&409===t.response.status?alert("このメールアドレスは既に使用されています"):t.response&&400===t.response.status?alert("入力内容に不備があります"):alert("ユーザーの登録に失敗しました")}},relockAdmin(){this.$emit("admin-relocked")}}};const Ts=(0,hs.A)(Xs,[["render",_s]]);var Is=Ts;const js={key:0,class:"login-overlay"},Vs={class:"login-modal"},Ws={class:"login-header"},Js={class:"form-group"},Ds=["disabled"],Os={class:"form-group"},Bs=["disabled"],Ms={key:0,class:"error-message"},Rs={class:"login-actions"},$s=["disabled"],Qs=["disabled"],qs={key:0},Hs={key:1};function Gs(e,t,s,l,n,i){return s.showLogin?((0,r.uX)(),(0,r.CE)("div",js,[(0,r.Lk)("div",Vs,[(0,r.Lk)("div",Ws,[t[5]||(t[5]=(0,r.Lk)("h3",{class:"font-semibold text-lg"},"ログイン",-1)),s.forceLogin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>i.closeLogin&&i.closeLogin(...e)),class:"close-button"},"×"))]),(0,r.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)((...e)=>i.handleLogin&&i.handleLogin(...e),["prevent"])),class:"login-form"},[(0,r.Lk)("div",Js,[t[6]||(t[6]=(0,r.Lk)("label",{for:"email"},"メールアドレス",-1)),(0,r.bo)((0,r.Lk)("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.loginForm.email=e),type:"email",class:"input w-full",placeholder:"example@gridscale.com",required:"",disabled:n.isLoading},null,8,Ds),[[a.Jo,n.loginForm.email]])]),(0,r.Lk)("div",Os,[t[7]||(t[7]=(0,r.Lk)("label",{for:"password"},"パスワード",-1)),(0,r.bo)((0,r.Lk)("input",{id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.loginForm.password=e),type:"password",class:"input w-full",placeholder:"パスワードを入力",required:"",disabled:n.isLoading},null,8,Bs),[[a.Jo,n.loginForm.password]])]),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",Ms,(0,o.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",Rs,[s.forceLogin?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("button",{key:0,type:"button",onClick:t[3]||(t[3]=(...e)=>i.closeLogin&&i.closeLogin(...e)),class:"btn-secondary",disabled:n.isLoading}," キャンセル ",8,$s)),(0,r.Lk)("button",{type:"submit",class:(0,o.C4)(["btn-primary",s.forceLogin?"w-full":""]),disabled:n.isLoading||!n.loginForm.email||!n.loginForm.password},[n.isLoading?((0,r.uX)(),(0,r.CE)("span",qs,"ログイン中...")):((0,r.uX)(),(0,r.CE)("span",Hs,"ログイン"))],10,Qs)])],32)])])):(0,r.Q3)("",!0)}var Ks={name:"LoginComponent",props:{showLogin:{type:Boolean,default:!1},forceLogin:{type:Boolean,default:!1}},emits:["close","login-success"],data(){return{loginForm:{email:"",password:""},isLoading:!1,errorMessage:""}},methods:{closeLogin(){this.forceLogin||(this.resetForm(),this.$emit("close"))},resetForm(){this.loginForm={email:"",password:""},this.errorMessage="",this.isLoading=!1},async handleLogin(){this.isLoading=!0,this.errorMessage="";try{const e=await Ht.A.post("/api/auth/login",{email:this.loginForm.email,password:this.loginForm.password}),{token:t,userId:s,userName:a,email:l,userType:r}=e.data,o={token:t,userId:s,userName:a,email:l,userType:r,loginTime:(new Date).toISOString()};localStorage.setItem("auth",JSON.stringify(o)),Ht.A.defaults.headers.common.Authorization=`Bearer ${t}`,this.$emit("login-success",o),this.resetForm(),alert("ログインに成功しました")}catch(e){if(console.error("Login failed:",e),e.response){const t=e.response.status,s=e.response.data?.message;this.errorMessage=401===t?s||"メールアドレスまたはパスワードが正しくありません":400===t?s||"入力内容を確認してください":s||"ログインに失敗しました"}else this.errorMessage="ネットワークエラーが発生しました"}finally{this.isLoading=!1}}}};const zs=(0,hs.A)(Ks,[["render",Gs],["__scopeId","data-v-0b3955c7"]]);var Ys=zs;const Zs="gridscale_cms_v1_light_logo_users_collapse";var ea={name:"App",components:{NewsListComponent:ks,UserRegistrationComponent:Is,LoginComponent:Ys},data(){return{route:"news",drawer:!1,ui:{sidebarCollapsed:!1},modals:{news:!1,wp:!1,contact:!1,rec:!1,user:!1},filters:{news:{q:""},wp:{q:""},contact:{q:"",status:""},rec:{q:"",gender:""},users:{q:"",role:"",status:""}},news:[],whitepapers:[],contacts:[],entries:[],users:[],newsForm:{id:null,title:"",date:"",body:"",published:!0},wpForm:{id:null,title:"",date:"",desc:"",url:"",tags:[],published:!1},wpTags:"",contactForm:{},replyBody:"",recForm:{id:null,name:"",appliedAt:"",email:"",tel:"",skills:"",note:"",stage:"new"},userForm:{id:null,userName:"",email:"",userType:"",activeFlag:!0},branding:{logoUrl:"/img/logo.png",logoH:28},security:{adminEnabled:!1,adminSalt:"",adminHash:"",newPass:"",newPass2:""},isAuthenticated:!1,currentUser:null,showLoginModal:!1}},computed:{nav(){const e=[{key:"news",label:"News",icon:"fa-solid fa-bullhorn",badge:()=>this.news.filter(e=>e.published).length},{key:"whitepapers",label:"WhitePaper",icon:"fa-solid fa-file-lines",badge:()=>this.whitepapers.filter(e=>e.published).length},{key:"contact",label:"お問い合わせ",icon:"fa-solid fa-inbox",badge:()=>this.contacts.filter(e=>"open"===e.status).length},{key:"recruit",label:"採用",icon:"fa-solid fa-users",badge:()=>this.entries.length}];return this.isAuthenticated&&"admin"===this.currentUser?.userType&&e.push({key:"users",label:"ユーザー",icon:"fa-solid fa-user-group",badge:()=>this.users.filter(e=>e.active).length}),e},current(){return this.nav.find(e=>e.key===this.route)||this.nav[0]},stats(){return{drafts:this.news.filter(e=>!e.published).length+this.whitepapers.filter(e=>!e.published).length,published:this.news.filter(e=>e.published).length+this.whitepapers.filter(e=>e.published).length}},filteredNews(){const e=this.filters.news.q.trim().toLowerCase();return this.news.filter(t=>!e||(t.title+t.body).toLowerCase().includes(e)).sort((e,t)=>(t.date||"").localeCompare(e.date||""))},filteredWP(){const e=this.filters.wp.q.trim().toLowerCase();return this.whitepapers.filter(t=>{const s=(t.title+" "+(t.tags||[]).join(" ")+" "+(t.desc||"")).toLowerCase();return!e||s.includes(e)}).sort((e,t)=>(t.date||"").localeCompare(e.date||""))},filteredContacts(){const e=this.filters.contact.q.trim().toLowerCase(),t=this.filters.contact.status;return this.contacts.filter(s=>{const a=!e||(s.name+s.subject+s.message).toLowerCase().includes(e),l=!t||s.status===t;return a&&l}).sort((e,t)=>(t.createdAt||"").localeCompare(e.createdAt||"")).reverse()},filteredRec(){const e=this.filters.rec.q.trim().toLowerCase(),t=this.filters.rec.gender;return this.entries.filter(s=>{const a=!e||(s.name+" "+(s.nameKana||"")+" "+(s.email||"")).toLowerCase().includes(e),l=!t||s.gender===t;return a&&l}).sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0))},recentUsers(){return[...this.users].sort((e,t)=>(t.createdAt||"").localeCompare(e.createdAt||"")).slice(0,5)},filteredUsers(){const e=this.filters.users.q.trim().toLowerCase(),t=this.filters.users.role,s=this.filters.users.status;return this.users.filter(a=>{const l=!e||(a.name||a.userName||"").toLowerCase().includes(e)||(a.email||"").toLowerCase().includes(e),r=!t||a.role===t||a.userType===t,o=!s||"active"===s&&a.active||"inactive"===s&&!a.active||"active"===s&&a.activeFlag||"inactive"===s&&!a.activeFlag;return l&&r&&o}).sort((e,t)=>(t.createdAt||"").localeCompare(e.createdAt||""))}},watch:{route(e){"users"===e&&this.isAuthenticated&&"admin"===this.currentUser?.userType&&this.loadUsers()}},created(){const e=JSON.parse(localStorage.getItem(Zs)||"{}");Object.assign(this.$data,{...this.$data,...e}),e.news||(this.news=[{id:crypto.randomUUID(),title:"ホームページをリニューアルしました",date:(new Date).toISOString().slice(0,10),body:"静的から動的配信へ。今後も定期的に更新します。",published:!0},{id:crypto.randomUUID(),title:"夏季休業のお知らせ",date:"2025-08-10",body:"8/13〜8/16は夏季休業です。",published:!0}]),e.whitepapers||(this.whitepapers=[{id:crypto.randomUUID(),title:"DX推進ガイド（製造業編）",date:"2025-07-15",desc:"現場起点のカイゼンから始めるDXの実践手順。",url:"",tags:["DX","製造"],published:!1}]),e.users||(this.users=[{id:crypto.randomUUID(),name:"Admin",email:"admin@example.com",role:"admin",active:!0,note:"デモ管理者",createdAt:(new Date).toISOString(),auth:{salt:"",hash:""}}]),this.initializeAuth(),this.persist()},methods:{toggleSidebar(){this.ui.sidebarCollapsed=!this.ui.sidebarCollapsed,this.persist()},persist(){const e={route:this.route,ui:this.ui,news:this.news,whitepapers:this.whitepapers,recruits:this.recruits,users:this.users,branding:this.branding,security:{adminEnabled:this.security.adminEnabled,adminSalt:this.security.adminSalt,adminHash:this.security.adminHash}};localStorage.setItem(Zs,JSON.stringify(e))},clearAll(){confirm("全データをlocalStorageから削除します。よろしいですか？")&&(localStorage.removeItem(Zs),location.reload())},async hashHex(e){const t=e instanceof Uint8Array?e:(new TextEncoder).encode(String(e)),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")},randomBytes(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t},async hashPassword(e,t){const s=t?Uint8Array.from(t.match(/.{1,2}/g).map(e=>parseInt(e,16))):this.randomBytes(16),a=new Uint8Array(s.length+(new TextEncoder).encode(e).length);a.set(s,0),a.set((new TextEncoder).encode(e),s.length);const l=await this.hashHex(a),r=Array.from(s).map(e=>e.toString(16).padStart(2,"0")).join("");return{salt:r,hash:l}},initializeAuth(){try{const e=localStorage.getItem("auth");if(e){const t=JSON.parse(e),s=new Date(t.loginTime),a=new Date,l=(a-s)/36e5;l<24?(this.currentUser=t,this.isAuthenticated=!0,Ht.A.defaults.headers.common.Authorization=`Bearer ${t.token}`,this.loadContacts(),this.loadEntries()):(localStorage.removeItem("auth"),this.handleLogout())}else this.showLoginModal=!0}catch(e){console.error("Failed to initialize auth:",e),localStorage.removeItem("auth"),this.showLoginModal=!0}},handleLoginSuccess(e){this.currentUser=e,this.isAuthenticated=!0,this.showLoginModal=!1,Ht.A.defaults.headers.common.Authorization=`Bearer ${e.token}`,console.log("User logged in:",e),this.loadContacts(),this.loadEntries(),window.location.reload()},handleLogout(){this.currentUser=null,this.isAuthenticated=!1,this.showLoginModal=!1,localStorage.removeItem("auth"),delete Ht.A.defaults.headers.common.Authorization,console.log("User logged out"),window.location.reload()},handleUserCreated(e){this.users.push(e),this.persist()},handlePasswordGenerated(e){console.log("Password generated:",e)},openNewsForm(e=null){this.newsForm=e?{id:e.id,title:e.title,date:e.date,body:e.content||"",published:void 0===e.published||e.published}:{id:null,title:"",date:(new Date).toISOString().slice(0,10),body:"",published:!0},this.modals.news=!0},async saveNews(){const e=this.newsForm;if(!e.title?.trim())return alert("タイトルは必須です");if(!e.date)return alert("日付は必須です");try{const t={title:e.title.trim(),date:e.date,content:e.body||""};e.id?(await Ht.A.put(`/api/news/${e.id}`,t),alert("ニュースを更新しました")):(await Ht.A.post("/api/news",t),alert("ニュースを作成しました"));const s=this.$refs.newsListComponent;s&&s.refreshNews&&await s.refreshNews(),this.modals.news=!1}catch(t){console.error("Failed to save news:",t);const s=e.id?"更新":"作成";alert(`ニュースの${s}に失敗しました`)}},async delNews(e){if(confirm("削除しますか？"))try{await Ht.A.delete(`/api/news/${e}`);const t=this.$refs.newsListComponent;t&&t.refreshNews&&await t.refreshNews(),this.news=this.news.filter(t=>t.id!==e),this.persist(),alert("ニュースを削除しました")}catch(t){console.error("Failed to delete news:",t),alert("ニュースの削除に失敗しました")}},openWPForm(e=null){this.wpForm=e?JSON.parse(JSON.stringify(e)):{id:null,title:"",date:(new Date).toISOString().slice(0,10),desc:"",url:"",tags:[],published:!1},this.wpTags=(this.wpForm.tags||[]).join(", "),this.modals.wp=!0},saveWP(){const e=this.wpForm;if(e.tags=this.wpTags.split(",").map(e=>e.trim()).filter(Boolean),!e.title?.trim())return alert("タイトルは必須です");if(e.id){const t=this.whitepapers.findIndex(t=>t.id===e.id);t>-1&&(this.whitepapers[t]=JSON.parse(JSON.stringify(e)))}else e.id=crypto.randomUUID(),this.whitepapers.push(JSON.parse(JSON.stringify(e)));this.modals.wp=!1,this.persist()},delWP(e){confirm("削除しますか？")&&(this.whitepapers=this.whitepapers.filter(t=>t.id!==e),this.persist())},async loadContacts(){try{const e=await Ht.A.get("/api/contacts?size=100");this.contacts=e.data.content.map(e=>({id:e.id,name:e.name,email:e.email,subject:e.subject||"",message:e.message,createdAt:new Date(e.createdAt).toLocaleString("sv-SE").replace("T"," ").slice(0,16),status:"open",replies:[]}))}catch(e){console.error("Failed to load contacts:",e),this.contacts=[]}},async loadEntries(){try{const e=await Ht.A.get("/api/entries?size=100");this.entries=e.data.content.map(e=>({id:e.id,name:e.name,nameKana:e.nameKana,email:e.email,tel:e.tel,birthYear:e.birthYear,birthMonth:e.birthMonth,birthDay:e.birthDay,gender:e.gender,graduationYear:e.graduationYear,graduationMonth:e.graduationMonth,address:e.address,postcode:e.postcode,resumeFilename:e.resumeFilename,ipAddress:e.ipAddress,createdAt:e.createdAt}))}catch(e){console.error("Failed to load entries:",e),this.entries=[]}},formatDate(e){return e?new Date(e).toLocaleString("sv-SE").replace("T"," ").slice(0,16):"-"},formatBirthDate(e){return e.birthYear&&e.birthMonth&&e.birthDay?`${e.birthYear}/${e.birthMonth.padStart(2,"0")}/${e.birthDay.padStart(2,"0")}`:"-"},formatBirthDateFull(e){return e.birthYear&&e.birthMonth&&e.birthDay?`${e.birthYear}年${e.birthMonth}月${e.birthDay}日`:"-"},formatGraduation(e){return e.graduationYear&&e.graduationMonth?`${e.graduationYear}/${e.graduationMonth.padStart(2,"0")}`:"-"},formatGender(e){switch(e){case"male":return"男性";case"female":return"女性";case"other":return"その他";default:return"-"}},openContact(e){this.contactForm=JSON.parse(JSON.stringify(e)),this.modals.contact=!0},replyEmail(){const e=this.contactForm.email,t=`Re: ${this.contactForm.subject||"お問い合わせ"}`,s=`https://mail.google.com/mail/?view=cm&to=${encodeURIComponent(e)}&su=${encodeURIComponent(t)}`;window.open(s,"_blank")},async delContact(e){if(confirm("削除しますか？"))try{await Ht.A.delete(`/api/contacts/${e}`),this.contacts=this.contacts.filter(t=>t.id!==e),this.persist(),console.log("Contact deleted:",e)}catch(t){console.error("Failed to delete contact:",t),alert("問い合わせの削除に失敗しました")}},openRecForm(e=null){this.recForm=e?JSON.parse(JSON.stringify(e)):{},this.modals.rec=!0},saveRec(){this.modals.rec=!1},delRec(e){confirm("削除しますか？")&&(this.entries=this.entries.filter(t=>t.id!==e),console.log("Entry deleted:",e))},roleLabel(e){return"admin"===e?"管理者":"editor"===e?"編集者":"閲覧のみ"},async loadUsers(){if(this.isAuthenticated&&"admin"===this.currentUser?.userType)try{const e=await Ht.A.get("/api/users");this.users=e.data.map(e=>({id:e.userId,userId:e.userId,name:e.userName,userName:e.userName,email:e.email,role:e.userType,userType:e.userType,active:e.activeFlag,activeFlag:e.activeFlag,createdAt:e.createdAt||(new Date).toISOString()})),this.persist()}catch(e){console.error("Failed to load users:",e),alert("ユーザー一覧の取得に失敗しました")}},openUserForm(e){this.userForm={id:e.id||e.userId,userName:e.name||e.userName,email:e.email,userType:e.role||e.userType,activeFlag:void 0!==e.active?e.active:e.activeFlag},this.modals.user=!0},async saveUser(){const e=this.userForm;if(!e.userName?.trim())return alert("名前は必須です");if(!e.email?.trim())return alert("メールは必須です");if(!e.userType)return alert("権限は必須です");try{const t={userName:e.userName.trim(),email:e.email.trim(),userType:e.userType,activeFlag:e.activeFlag};await Ht.A.put(`/api/users/${e.id}`,t);const s=this.users.findIndex(t=>(t.id||t.userId)===e.id);s>-1&&(this.users[s]={...this.users[s],name:e.userName,userName:e.userName,email:e.email,role:e.userType,userType:e.userType,active:e.activeFlag,activeFlag:e.activeFlag}),this.modals.user=!1,this.persist(),alert("ユーザー情報を更新しました")}catch(t){console.error("Failed to update user:",t),t.response&&409===t.response.status?alert("このメールアドレスは既に使用されています"):t.response&&403===t.response.status?alert("権限がありません"):alert("ユーザー情報の更新に失敗しました")}},async saveAdminPass(){if(!this.security.newPass||this.security.newPass.length<8)return void alert("パスコードは8文字以上で入力してください");if(this.security.newPass!==this.security.newPass2)return void alert("パスコードが一致しません");const{salt:e,hash:t}=await this.hashPassword(this.security.newPass);this.security.adminSalt=e,this.security.adminHash=t,this.security.adminEnabled=!0,this.security.newPass="",this.security.newPass2="",this.persist(),alert("管理者パスコードを設定しました")},clearAdminPass(){confirm("管理者パスコードを無効化しますか？")&&(this.security.adminEnabled=!1,this.security.adminSalt="",this.security.adminHash="",this.persist(),alert("管理者パスコードを無効化しました"))},exportJSON(){const e=new Blob([localStorage.getItem(Zs)||"{}"],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="gridscale_cms.json",t.click(),URL.revokeObjectURL(t.href)},exportCSV(){const e=[["type","id","date","title","body","published"]];this.news.forEach(t=>e.push(["news",t.id,t.date,this.escapeCSV(t.title),this.escapeCSV(t.body),t.published]));const t=e.map(e=>e.join(",")).join("\n"),s=new Blob([t],{type:"text/csv"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="gridscale_news.csv",a.click(),URL.revokeObjectURL(a.href)},importFile(e){const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=()=>{try{const e=JSON.parse(s.result);confirm("現在のデータを上書きしますか？")&&(localStorage.setItem(Zs,JSON.stringify(e)),location.reload())}catch{alert("JSONの読み込みに失敗しました")}},s.readAsText(t,"utf-8")},escapeCSV(e){return e=(e??"")+"",e.includes('"')||e.includes(",")||e.includes("\n")?`"${e.replaceAll('"','""')}"`:e},uploadLogo(e){const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=()=>{this.branding.logoUrl=s.result,this.persist()},s.readAsDataURL(t)},saveBranding(){this.persist(),alert("ブランド設定を保存しました")},resetBranding(){this.branding={logoUrl:"/img/logo.png",logoH:28},this.persist()},onLogoError(e){e.target.onerror=null,e.target.src="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="160" height="40"><rect width="160" height="40" fill="#eef2ff"/><text x="8" y="26" font-size="16" fill="#4f46e5">Logo not found</text></svg>')}}};const ta=(0,hs.A)(ea,[["render",qt]]);var sa=ta,aa=s(220);const la={class:"home"},ra={class:"hero-section"},oa={class:"api-test"};function na(e,t,s,a,l,n){return(0,r.uX)(),(0,r.CE)("div",la,[(0,r.Lk)("div",ra,[t[1]||(t[1]=(0,r.Fv)('<h1 data-v-1e192472>Welcome to Next Push</h1><p class="hero-subtitle" data-v-1e192472>A modern web application built with Spring Boot and Vue.js</p><div class="features-grid" data-v-1e192472><div class="feature-card" data-v-1e192472><h3 data-v-1e192472>🚀 Spring Boot Backend</h3><p data-v-1e192472>Powerful REST API with Spring Boot, JPA, and H2 database</p></div><div class="feature-card" data-v-1e192472><h3 data-v-1e192472>💚 Vue.js Frontend</h3><p data-v-1e192472>Modern, reactive user interface built with Vue 3 and Vue Router</p></div><div class="feature-card" data-v-1e192472><h3 data-v-1e192472>🔧 Integrated Build</h3><p data-v-1e192472>Maven handles both backend and frontend builds seamlessly</p></div></div>',3)),(0,r.Lk)("div",oa,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.testBackendConnection&&n.testBackendConnection(...e)),class:"test-button"}," Test Backend Connection "),l.connectionStatus?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,o.C4)(["status-message",l.connectionStatus.type])},(0,o.v_)(l.connectionStatus.message),3)):(0,r.Q3)("",!0)])])])}var ia={name:"Home",data(){return{connectionStatus:null}},methods:{async testBackendConnection(){this.connectionStatus=null;try{await Ht.A.get("/api/health"),this.connectionStatus={type:"success",message:"Backend connection successful!"}}catch(e){this.connectionStatus={type:"error",message:"Backend connection failed. Make sure Spring Boot is running."}}}}};const ca=(0,hs.A)(ia,[["render",na],["__scopeId","data-v-1e192472"]]);var da=ca;const ua={class:"about"};function pa(e,t,s,a,l,o){return(0,r.uX)(),(0,r.CE)("div",ua,[...t[0]||(t[0]=[(0,r.Fv)('<div class="about-content" data-v-7c243058><h1 data-v-7c243058>About Next Push</h1><p class="intro" data-v-7c243058> Next Push is a full-stack web application template that combines the power of Spring Boot for the backend with the modern Vue.js framework for the frontend. </p><div class="tech-stack" data-v-7c243058><h2 data-v-7c243058>Technology Stack</h2><div class="stack-section" data-v-7c243058><h3 data-v-7c243058>🏗️ Backend Technologies</h3><ul data-v-7c243058><li data-v-7c243058><strong data-v-7c243058>Spring Boot 3.2.0</strong> - Enterprise-grade Java framework</li><li data-v-7c243058><strong data-v-7c243058>Spring Data JPA</strong> - Database abstraction layer</li><li data-v-7c243058><strong data-v-7c243058>H2 Database</strong> - In-memory database for development</li><li data-v-7c243058><strong data-v-7c243058>Maven</strong> - Build automation and dependency management</li></ul></div><div class="stack-section" data-v-7c243058><h3 data-v-7c243058>🎨 Frontend Technologies</h3><ul data-v-7c243058><li data-v-7c243058><strong data-v-7c243058>Vue.js 3</strong> - Progressive JavaScript framework</li><li data-v-7c243058><strong data-v-7c243058>Vue Router 4</strong> - Client-side routing</li><li data-v-7c243058><strong data-v-7c243058>Pinia</strong> - State management library</li><li data-v-7c243058><strong data-v-7c243058>Axios</strong> - HTTP client for API calls</li></ul></div><div class="stack-section" data-v-7c243058><h3 data-v-7c243058>🔧 Development Tools</h3><ul data-v-7c243058><li data-v-7c243058><strong data-v-7c243058>Spring Boot DevTools</strong> - Hot reload for backend</li><li data-v-7c243058><strong data-v-7c243058>Vue CLI Service</strong> - Frontend build tools</li><li data-v-7c243058><strong data-v-7c243058>ESLint</strong> - Code quality and consistency</li><li data-v-7c243058><strong data-v-7c243058>Frontend Maven Plugin</strong> - Integrated build process</li></ul></div></div><div class="project-info" data-v-7c243058><h2 data-v-7c243058>Project Structure</h2><p data-v-7c243058> This project follows a standard Maven structure with the backend code in <code data-v-7c243058>src/main/java</code> and the frontend code in the <code data-v-7c243058>frontend/</code> directory. The build process automatically compiles the Vue.js application and serves it through Spring Boot&#39;s static resource handling. </p></div><div class="getting-started" data-v-7c243058><h2 data-v-7c243058>Getting Started</h2><ol data-v-7c243058><li data-v-7c243058>Run <code data-v-7c243058>mvn spring-boot:run</code> to start the backend server</li><li data-v-7c243058>Navigate to <code data-v-7c243058>http://localhost:8080</code> to view the application</li><li data-v-7c243058>Access the H2 database console at <code data-v-7c243058>http://localhost:8080/h2-console</code></li><li data-v-7c243058>For frontend development, use <code data-v-7c243058>npm run serve</code> in the frontend directory</li></ol></div></div>',1)])])}var ma={name:"About"};const ha=(0,hs.A)(ma,[["render",pa],["__scopeId","data-v-7c243058"]]);var ga=ha;const ka=[{path:"/",name:"Home",component:da},{path:"/about",name:"About",component:ga}],ba=(0,aa.aE)({history:(0,aa.LA)("/"),routes:ka});var fa=ba;const va=(0,a.Ef)(sa);va.use((0,l.Ey)()),va.use(fa),va.mount("#app")}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,r){if(!a){var o=1/0;for(d=0;d<e.length;d++){a=e[d][0],l=e[d][1],r=e[d][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||o>=r)&&Object.keys(s.O).every(function(e){return s.O[e](a[i])})?a.splice(i--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,l,r]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,r,o=a[0],n=a[1],i=a[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(i)var d=i(s)}for(t&&t(a);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunknext_push_frontend"]=self["webpackChunknext_push_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(331)});a=s.O(a)})();
//# sourceMappingURL=app.d99d45cf.js.map